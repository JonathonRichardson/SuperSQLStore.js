define(["require","exports","module","jquery","underscore","knockout","classify"],function(e,n,t,r,o,s,a){var i={};return i.ObservableRow=a.newClass({constructor:function(e){var n=this;e=e||{};var t=e.row;n._originalData=t,n._columns={},jQuery.each(o.keys(t),function(e,r){var a=t[r];o.isArray(a)||0!==o.keys(a).length||r.toString().match(/^_/)||null!==a&&a.toString().match(/^urn:/)||(n[r]=s.observable(a),n._columns[r]=!0)})},methods:{getColumn:function(e){return e in this._columns&&s.isObservable(this[e])?this[e]():void 0},setColumn:function(e,n){if(e in this._columns&&s.isObservable(this[e])){var t=this[e]();return this[e](n),t}return void 0},hasBeenModified:function(){var e=this,n=!1;return jQuery.each(this._columns,function(t){e._originalData[t]!==e.getColumn(t)&&(n=!0)}),n},columnHasBeenModified:function(e){return self._originalData[e]!==self.getColumn(e)?!0:!1}},computeds:{getRawRowData:function(){var e=this,n=o.clone(this._originalData);return jQuery.each(this._columns,function(t){n[t]=e.getColumn(t)}),n}}}),i.ObservableTable=a.newClass({constructor:function(e){e=e||{};var n=i.ObservableRow;"rowConstructor"in e&&(n=e.rowConstructor);var t=[];o.isArray(e.rows)||(t=o.map(e.rows,function(e){return new n({row:value})})),this.rows=s.observableArray(t)},methods:{each:function(e){s.utils.arrayForEach(this.rows(),function(n){e.call(n,n)})}},computeds:{getRawRows:function(){var e=[];return s.utils.arrayForEach(this.rows(),function(n){e.push(n.getRawRowData())}),e},changedRowsRaw:function(){var e=o.filter(this.rows(),function(e){return e.hasBeenModified()?!0:!1});return e=o.map(e,function(e){return e.getRawRowData()})}}}),i.IndexedObservableTable=a.newClass({parent:i.ObservableTable,constructor:function(e){var n=this;if(!("key"in e))throw"You need to supply a key to index on in an IndexedObservableTable";this.keyForIndex=e.key,this.keyIndex={},o.each(this.rows(),function(e,t){n.keyIndex[s.unwrap(e[n.keyForIndex])]=t}),this.rows.subscribe(function(e){o.each(e,function(e){var t=s.unwrap(e.value[n.keyForIndex]),r=n.keyIndex;"moved"in e?r[t]=e.moved:"added"===e.status?r[t]=e.index:"deleted"===e.status&&delete r[t]})},null,"arrayChange")},methods:{getRowByKey:function(e){return this.rows()[this.keyIndex[e]]}}}),i.Version="0.0.12",i});